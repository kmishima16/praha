# データベースモデリング3 課題1

## ER図

![課題](https://github.com/kmishima16/praha/blob/feature/db_modeling_3/%E8%AA%B2%E9%A1%8C1/db-modeling3.png)

## テーブル設計

[閉方テーブル](https://kntmr.hatenablog.com/entry/2020/08/14/080000)を参考にしてテーブルを作成しました。

階層構造を扱う設計は、[sql アンチパターン ナイーブツリー](https://qiita.com/fktnkit/items/57033c10b41b5747dbea)だと自己参照型、経路列挙型、閉方テーブル型などありますが、今回は階層のツリー構造全体を取得したり、階層構造の容易な閉方テーブルモデルを採用しました。

## DDL

[sql](https://github.com/kmishima16/praha/blob/feature/db_modeling_3/%E8%AA%B2%E9%A1%8C1/docker-mysql/script/01DDL.sql)

## DML

### 初期データ作成

[sql](https://github.com/kmishima16/praha/blob/feature/db_modeling_3/%E8%AA%B2%E9%A1%8C1/docker-mysql/script/02DML.sql)

### フォルダ階層のCRUD操作

#### 動作確認したクエリ

- あるフォルダに子フォルダを作成する
- あるフォルダの親フォルダ、子孫フォルダidを取得する
- フォルダを子孫フォルダごと削除する
- フォルダをあるフォルダに子孫フォルダごと移動する

[sql](https://github.com/kmishima16/praha/blob/feature/db_modeling_3/%E8%AA%B2%E9%A1%8C1/docker-mysql/script/03DML.sql)
